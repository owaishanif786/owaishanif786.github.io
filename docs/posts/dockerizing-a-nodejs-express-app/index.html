<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Dockerizing a Nodejs Express App | elesscode</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="Dockerizing a node express app is simple.
step1: Create simple node app with express. package.json with with its dependencies. index.js with required code which will be creating and running server at port 8080. Our simple server code that returns hello world when we will hit http://x.x.x.x:8080/
//package.json { &#34;name&#34;: &#34;node-express-app&#34;, &#34;version&#34;: &#34;1.0.0&#34;, &#34;description&#34;: &#34;&#34;, &#34;main&#34;: &#34;index.js&#34;, &#34;scripts&#34;: { &#34;start&#34;: &#34;node index.js&#34; }, &#34;keywords&#34;: [], &#34;author&#34;: &#34;&#34;, &#34;license&#34;: &#34;ISC&#34;, &#34;dependencies&#34;: { &#34;express&#34;: &#34;^4.">
    <meta name="generator" content="Hugo 0.101.0" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



  

  
    <link rel="stylesheet" href="/special.css">
  

    
    
    
      

    

    
    
    <meta property="og:title" content="Dockerizing a Nodejs Express App" />
<meta property="og:description" content="Dockerizing a node express app is simple.
step1: Create simple node app with express. package.json with with its dependencies. index.js with required code which will be creating and running server at port 8080. Our simple server code that returns hello world when we will hit http://x.x.x.x:8080/
//package.json { &#34;name&#34;: &#34;node-express-app&#34;, &#34;version&#34;: &#34;1.0.0&#34;, &#34;description&#34;: &#34;&#34;, &#34;main&#34;: &#34;index.js&#34;, &#34;scripts&#34;: { &#34;start&#34;: &#34;node index.js&#34; }, &#34;keywords&#34;: [], &#34;author&#34;: &#34;&#34;, &#34;license&#34;: &#34;ISC&#34;, &#34;dependencies&#34;: { &#34;express&#34;: &#34;^4." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.elesscode.com/posts/dockerizing-a-nodejs-express-app/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-02T07:50:07+05:00" />
<meta property="article:modified_time" content="2022-08-02T07:50:07+05:00" />

<meta itemprop="name" content="Dockerizing a Nodejs Express App">
<meta itemprop="description" content="Dockerizing a node express app is simple.
step1: Create simple node app with express. package.json with with its dependencies. index.js with required code which will be creating and running server at port 8080. Our simple server code that returns hello world when we will hit http://x.x.x.x:8080/
//package.json { &#34;name&#34;: &#34;node-express-app&#34;, &#34;version&#34;: &#34;1.0.0&#34;, &#34;description&#34;: &#34;&#34;, &#34;main&#34;: &#34;index.js&#34;, &#34;scripts&#34;: { &#34;start&#34;: &#34;node index.js&#34; }, &#34;keywords&#34;: [], &#34;author&#34;: &#34;&#34;, &#34;license&#34;: &#34;ISC&#34;, &#34;dependencies&#34;: { &#34;express&#34;: &#34;^4."><meta itemprop="datePublished" content="2022-08-02T07:50:07+05:00" />
<meta itemprop="dateModified" content="2022-08-02T07:50:07+05:00" />
<meta itemprop="wordCount" content="412">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Dockerizing a Nodejs Express App"/>
<meta name="twitter:description" content="Dockerizing a node express app is simple.
step1: Create simple node app with express. package.json with with its dependencies. index.js with required code which will be creating and running server at port 8080. Our simple server code that returns hello world when we will hit http://x.x.x.x:8080/
//package.json { &#34;name&#34;: &#34;node-express-app&#34;, &#34;version&#34;: &#34;1.0.0&#34;, &#34;description&#34;: &#34;&#34;, &#34;main&#34;: &#34;index.js&#34;, &#34;scripts&#34;: { &#34;start&#34;: &#34;node index.js&#34; }, &#34;keywords&#34;: [], &#34;author&#34;: &#34;&#34;, &#34;license&#34;: &#34;ISC&#34;, &#34;dependencies&#34;: { &#34;express&#34;: &#34;^4."/>

	
<script async src="https://www.googletagmanager.com/gtag/js?id=G-M2E12SF4V3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-M2E12SF4V3');
</script>
  </head>

  <body class="ma0 bg-light-yellow font-fira">

    
   
  

  
  <header class="cover bg-top" style="background-image: url('https://www.elesscode.com/images/docker_node.png');">
    <div class="bg-black-60">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        elesscode
      
    </a>
    <div class="flex-l items-center">
      

      
      
<div class="ananke-socials">
  
</div>

    </div>
  </div>
</nav>

      <div class="tc-l pv6 ph3 ph4-ns">
        
          <h1 class="f2 f1-l fw2 white-90 mb0 lh-title">Dockerizing a Nodejs Express App</h1>
          
        
      </div>
    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked">
          
        POSTS
      </aside>
      










  <div id="sharing" class="mt3 ananke-socials">
    
  </div>


      <h1 class="f1 athelas mt3 mb1">Dockerizing a Nodejs Express App</h1>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2022-08-02T07:50:07+05:00">August 2, 2022</time>
      

      
      
        <span class="f6 mv4 dib tracked"> - 2 minutes read </span>
        <span class="f6 mv4 dib tracked"> - 412 words </span>
      
    </header>
    <div class="nested-copy-line-height lh-copy font-fira f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>Dockerizing a node express app is simple.</p>
<h2 id="step1-create-simple-node-app-with-express">step1: Create simple node app with express.</h2>
<ol>
<li>package.json with with its dependencies.</li>
<li>index.js with required code which will be creating and running server at port 8080.</li>
</ol>
<p>Our simple server code that returns hello world when we will hit <a href="http://x.x.x.x:8080/">http://x.x.x.x:8080/</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#75715e">//package.json
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;node-express-app&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;version&#34;</span>: <span style="color:#e6db74">&#34;1.0.0&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;main&#34;</span>: <span style="color:#e6db74">&#34;index.js&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;scripts&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;start&#34;</span>: <span style="color:#e6db74">&#34;node index.js&#34;</span>
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;keywords&#34;</span>: [],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;author&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;license&#34;</span>: <span style="color:#e6db74">&#34;ISC&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;dependencies&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;express&#34;</span>: <span style="color:#e6db74">&#34;^4.18.1&#34;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">//index.js
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#e6db74">&#39;use strict&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">express</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;express&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Constants
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">PORT</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">8080</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">HOST</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;0.0.0.0&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// App
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">app</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">express</span>();
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;/&#39;</span>, (<span style="color:#a6e22e">req</span>, <span style="color:#a6e22e">res</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">send</span>(<span style="color:#e6db74">&#39;Hello World&#39;</span>);
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">listen</span>(<span style="color:#a6e22e">PORT</span>, <span style="color:#a6e22e">HOST</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">`Running on http://</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">HOST</span><span style="color:#e6db74">}</span><span style="color:#e6db74">:</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">PORT</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>);
</span></span></code></pre></div><h3 id="step2-write-docker-file-named-dockerfile">step2: Write docker file named <code>Dockerfile</code></h3>
<ol>
<li>Specify node docker image</li>
<li>Assume working directory where all our code will reside inside image.</li>
<li>Copy code that working directory.</li>
<li>install npm packages</li>
<li>expose port 8080</li>
<li>run server command</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mkdir node-express-app
</span></span><span style="display:flex;"><span>cd node-express-app
</span></span><span style="display:flex;"><span>npm init -y
</span></span><span style="display:flex;"><span>npm install express --save
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-docker" data-lang="docker"><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span><span style="color:#e6db74"> node:16</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># Create app directory</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">WORKDIR</span><span style="color:#e6db74"> /usr/src/app</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># Bundle app source</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">COPY</span> . .<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">RUN</span> npm install<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">EXPOSE</span><span style="color:#e6db74"> 8080</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">CMD</span> [ <span style="color:#e6db74">&#34;node&#34;</span>, <span style="color:#e6db74">&#34;index.js&#34;</span> ]<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><h3 id="step3-create-dockerignore-file">Step3: Create .dockerignore file</h3>
<p>you will need dockerignore file just like .gitignore where you have to exclude directories like node_modules etc</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>node_modules
</span></span><span style="display:flex;"><span>npm-debug.log
</span></span></code></pre></div><h3 id="step4-build-your-image">Step4: Build your image</h3>
<p>you have to run build command where you have created Dockerfile. i.e root of of your project directory.
the build command will read your Dockerfile and will perform things in series.
while running build command you have to specify your image name also or the tag that will identify your image.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#Run build command</span>
</span></span><span style="display:flex;"><span>docker build . -t node-express-app
</span></span><span style="display:flex;"><span><span style="color:#75715e">#list docker images</span>
</span></span><span style="display:flex;"><span>docker images
</span></span></code></pre></div><h3 id="step5-run-container-from-your-image">Step5: Run container from your image</h3>
<p>The live form of your image is called container. While running container from image we will specify port in the form of <code>EXTERNAL_PORT:INTERNAL_PORT</code>
There is <code>-d</code> flag is used to specify run container in background rather than interactive. you can say here d stand stand for daemon or something that runs in backgorund.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#docker run -p EXTERNAL:INTERNAL --detach &lt;image_name&gt;</span>
</span></span><span style="display:flex;"><span>docker run -p 44444:8080 -d node-web-app
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#list running container</span>
</span></span><span style="display:flex;"><span>docker ps
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#get logs from container</span>
</span></span><span style="display:flex;"><span>docker logs -f &lt;container_id&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#Entering and executing into running container</span>
</span></span><span style="display:flex;"><span>docker exec -it &lt;container_id&gt; /bin/bash
</span></span></code></pre></div><h3 id="step6-testing-your-node-app">Step6: Testing your node app</h3>
<p>you server is running at port 8080 while you have externall mapped it to 44444 so we can make a curl request on that url.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -i localhost:44444
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#stop container</span>
</span></span><span style="display:flex;"><span>docker stop &lt;container_name&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#remove the stopped container</span>
</span></span><span style="display:flex;"><span>docker rm container_name
</span></span></code></pre></div><ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l"><div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">What&#39;s in this posts</p>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#step1-create-simple-node-app-with-express">step1: Create simple node app with express.</a>
      <ul>
        <li><a href="#step2-write-docker-file-named-dockerfile">step2: Write docker file named <code>Dockerfile</code></a></li>
        <li><a href="#step3-create-dockerignore-file">Step3: Create .dockerignore file</a></li>
        <li><a href="#step4-build-your-image">Step4: Build your image</a></li>
        <li><a href="#step5-run-container-from-your-image">Step5: Run container from your image</a></li>
        <li><a href="#step6-testing-your-node-app">Step6: Testing your node app</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://www.elesscode.com" >
    &copy;  elesscode 2022 
  </a>
    <div>
<div class="ananke-socials">
  
</div>
</div>
  </div>
</footer>

  </body>
</html>
